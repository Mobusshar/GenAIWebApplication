<div class="container my-5">

  <!-- Welcome Section -->
  <div class="text-center text-muted mb-4" style="border: 2px solid #007bff; padding: 20px; border-radius: 10px; background-color: #f0f8ff;">
    <h3 class="text-primary"> Welcome to Phase 2 ‚Äì Let‚Äôs See the Magic Happen! </h3>
    <p style="color: #333; font-weight: 500;">
      Congratulations on reaching the second stage of your exercise! Now it‚Äôs time to bring your product ideas to life and see how they evolve through the power of AI.
    </p>
    <h4 class="text-success"> Here‚Äôs what to do next:</h4>
    <ul style="text-align: left; color: #333; font-weight: 500;">
      <li>Take a moment to review your product sketches and the details you previously submitted. They‚Äôre displayed below‚Äîmake sure everything looks just right.</li>
      <li>Need to make changes? No worries! You can go back and edit your product details at any time before generating the AI results. Just tweak the names, costs, or descriptions if something new comes to mind.</li>
      <li>When you're ready, click the <strong>‚ÄúGenerate AI‚Äù</strong> button.</li>
      <li>‚öôÔ∏è Heads up: It may take up to 30 seconds for the AI to create your personalized results. Please be patient and wait while the button is loading.</li>
    </ul>
    <p style="color: #333; font-weight: 500;">
       If the AI doesn‚Äôt respond or there‚Äôs an issue, simply reach out to your course instructor or TA for assistance.
    </p>
    <h4 class="text-warning"> Once your AI-enhanced product image appears:</h4>
    <ul style="text-align: left; color: #333; font-weight: 500;">
      <li>Carefully explore the visual output and read the updated product descriptions.</li>
      <li>Look for creative inspiration‚Äîmaybe the AI introduces something fresh you hadn‚Äôt thought of!</li>
      <li>If the image gives you new ideas, go ahead and update your original sketch:
        <ul>
          <li>Use a different color to mark these new inspirations.</li>
        </ul>
      </li>
      <li>Prefer your original version? That‚Äôs completely fine‚Äîstick with it!</li>
    </ul>
    <p style="color: #333; font-weight: 500;">
       After refining your sketch (or keeping it as is), upload your final version in the next step.
    </p>
    <h4 class="text-primary"> Still exploring?</h4>
    <ul style="text-align: left; color: #333; font-weight: 500;">
      <li>Not totally satisfied with the result? You can hit the <strong>‚ÄúGenerate AI‚Äù</strong> button again for a new version.</li> 
      <li>After each generations please load the page to see the changes.</li>
      <li>You‚Äôre free to do this up to 6‚Äì10 times‚Äîexperiment and see what clicks!</li>
    </ul>
    <p style="color: #333; font-weight: 500;">
       When everything feels complete, just click <strong>‚ÄúProceed to Submit‚Äù</strong> to move forward and wrap up the exercise.
    </p>
    <p style="color: #333; font-weight: 500;">
       This is where human imagination meets AI innovation‚Äîuse it to your full advantage! 
    </p>
  </div>

  <!-- Generate AI Button -->
  <div class="text-center mb-4">
    <button 
      class="btn btn-success btn-lg" 
      (click)="generateAIImage()" 
      [disabled]="isLoading">
      {{ isLoading ? 'Generating...' : 'Generate AI' }}
    </button>
    <p class="mt-2 text-muted">Click this button to generate the AI image based on your uploaded sketch and product details.</p>
  </div>

  <!-- Loading Spinner -->
  <div class="text-center mt-4" *ngIf="isLoading">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted">Please wait while the AI generates your image and product details...</p>
  </div>

  <!-- Section to Compare Uploaded and AI-Generated Data -->
  <div class="container mt-4">
    <h3 class="text-center mb-4">Compare Uploaded and AI-Generated Data</h3>
    <div class="row">
      <!-- Left Side: Uploaded Data -->
      <div class="col-md-6">
        <div class="card shadow-sm">
          <div class="card-header text-center bg-primary text-white">
            <h5>Uploaded Data</h5>
          </div>
          <div class="card-body">
            <div class="text-center mb-3">
              <img *ngIf="uploadedImage" [src]="uploadedImage" alt="Uploaded Sketch" class="img-fluid rounded" style="max-width: 500px; height: auto; border: 2px solid #ddd; padding: 5px; border-radius: 10px;">
            </div>
            <table class="table table-striped table-hover">
              <tbody>
                <tr>
                  <td colspan="2" class="text-center">
                    <a *ngIf="uploadedImage" [href]="uploadedImage" target="_blank" class="btn btn-outline-primary mt-2">
                      View Uploaded Sketch
                    </a>
                  </td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 1</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product1_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product1_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product1_suggested_euro }}</td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 2</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product2_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product2_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product2_suggested_euro }}</td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 3</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product3_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product3_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product3_suggested_euro }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Right Side: AI-Generated Data -->
      <div class="col-md-6">
        <div class="card shadow-sm">
          <div class="card-header text-center bg-success text-white">
            <h5>AI-Generated Data</h5>
          </div>
          <div class="card-body">
            <div class="text-center mb-3">
              <img *ngIf="generatedImage" [src]="generatedImage" alt="Generated AI Image" class="img-fluid rounded" style="max-width: 500px; height: auto; border: 2px solid #ddd; padding: 5px; border-radius: 10px;">
            </div>
            <table class="table table-striped table-hover">
              <tbody>
                <tr>
                  <td colspan="2" class="text-center">
                    <a *ngIf="generatedImage" [href]="generatedImage" target="_blank" class="btn btn-outline-success mt-2">
                      View Generated Image
                    </a>
                  </td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 1</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product1_ai_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product1_ai_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product1_ai_suggested_euro }}</td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 2</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product2_ai_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product2_ai_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product2_ai_suggested_euro }}</td>
                </tr>
                <tr>
                  <th colspan="2" class="text-center bg-light">Product 3</th>
                </tr>
                <tr>
                  <th>Name</th>
                  <td>{{ product3_ai_name }}</td>
                </tr>
                <tr>
                  <th>Description</th>
                  <td>{{ product3_ai_description }}</td>
                </tr>
                <tr>
                  <th>Suggested Euro</th>
                  <td>{{ product3_ai_suggested_euro }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <hr>

  <!-- Section to Upload Final Sketch -->
  <div class="mt-4">
    <div class="card shadow-sm" style="border: 2px solid #28a745; border-radius: 10px; background-color: #f8f9fa;">
      <div class="card-body text-center">
        <label for="sketch_upload_path_after" class="form-label text-success" style="font-size: 1.2rem;">
          <strong>üì§ Refine your sketch based on AI inspiration and upload the final version here.</strong>
        </label>
        <input 
          type="file" 
          id="sketch_upload_path_after" 
          (change)="onFinalSketchSelected($event)" 
          class="form-control mt-3" 
          accept="image/*" 
          style="max-width: 400px; margin: 0 auto;"
        />
        <p class="mt-3 text-muted">Accepted format .jpg</p>
      </div>
    

    <!-- Preview Uploaded Final Sketch -->
    <div class="mt-4 text-center" *ngIf="finalSketchImage">
      <h5 class="text-success">Preview of Your Final Sketch:</h5>
      <img 
        [src]="finalSketchImage" 
        alt="Final Sketch Preview" 
        class="img-fluid rounded" 
        style="max-width: 800px; height: auto; border: 2px solid #ddd; padding: 5px; border-radius: 10px;"
      />
    </div>
  </div>
  </div>

  <hr>

  <!-- Section to Submit Exercise -->
  <div class="container">
    <p class="text-center">Review the details and submit your exercise.</p>

    <div class="text-center mt-4">
      <button class="btn btn-primary" (click)="navigateToSubmitExercise2()">Proceed to Submit Exercise</button>
    </div>
  </div>
</div>
